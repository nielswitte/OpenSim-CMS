**NOTICE:** You can only retrieve files if you meet at least one of the following requirements.

 * You have `ALL` permissions
 * You created the file
 * You are a member of a group to which the file is attached

A list with presentations can be requested by using the following GET request.

```http
GET /api/presentations/ HTTP/1.1
```

This will return the first 50 presentations. To request the next 50, add the offset as a parameter. When using an ofset of 50, the following example will return the presentations from 51 to 100.

```http
GET /api/presentations/<OFFSET>/ HTTP/1.1
```

Example of the output will be similar to the request of a single presentation, only in a list form. Cache information is left out in the list view.

```json
{
    {
        "type": "presentation",
        "title": "Test presentation title",
        "presentationId": "1",
        "user": {
            "id": 4,
            "username": "janedoe",
            "firstName": "Jane",
            "lastName": "Doe",
            "email": "jane@doe.com",
            "picture": "http://localhost:80/OpenSim-CMS/api/user/4/picture/",
            "lastLogin": "2014-04-15 16:00:01"
        },
        "slides": [
            {
                "id": 1,
                "number": 1,
                "hasComments": false,
                "image": "http://localhost:80/OpenSim-CMS/api/presentation/1/slide/1/image/"
            },
            {
                (...)
            },
            (...)
        ],
        "slidesCount": 14,
        "creationDate": "2014-02-13 14:21:47",
        "modificationDate": "2014-02-13 14:22:09"
    },
    { (...) },
    { (...) },
    (...)
}
```
## Add a new presentation

```http
POST /api/presentation/ HTTP/1.1
```
| Parameter         | Type      | Description                                                 |
|-------------------|-----------|-------------------------------------------------------------|
| title             | string    | The title of the presentation                               |
| type              | string    | The document type, in this case it should be "presentation" |
| file              | file      | Base64 encoded file (PDF)                                   |


## Specific presentation
To retrieve a specific presentation use the following command and replace the id with the number of the presentation you want to get. The trailing / is optional.

```http
GET /api/presentation/<ID>/ HTTP/1.1
```

Example of output when request is successful:

```json
{
    "type": "presentation",
    "title": "Test presentation title",
    "presentationId": "1",
    "user": {
        "id": 4,
        "username": "janedoe",
        "firstName": "Jane",
        "lastName": "Doe",
        "email": "jane@doe.com",
        "picture": "http://localhost:80/OpenSim-CMS/api/user/4/picture/",
        "lastLogin": "2014-04-15 16:00:01"
    },
    "slides": [
        {
            "id": 1,
            "number": 1,
            "hasComments": false,
            "image": "http:\/\/localhost:80\/OpenSim-CMS\/api\/presentation\/1\/slide\/1\/image\/",
            "cache": [
                "1": {
                    "uuid": "90591103-6982-4eed-9b31-291f7077194a",
                    "expires": "2014-02-23 14:29:25",
                    "isExpired": 0
                },
                "2": { (...) },
                (...)
            ]
        },
        {
            (...)
        },
        (...)
    ],
    "slidesCount": 14,
    "creationDate": "2014-02-13 14:21:47",
    "modificationDate": "2014-02-13 14:22:09"
}
```
The cache section of a slide uses the UUID which is matched to the UUID generated by OpenSim when the slide is accessed. By saving the UUID caching of textures is enabled and OpenSim does not need to request the image from the server everytime it is used. The cache is done on a grid base, the index of the case refers to the Grid ID. This is done by using the PUT function for a single slide (see below).

The slide details for just one specific slide can be accessed through its ID:

```http
GET /api/presentation/<ID>/slide/<SLIDE-ID>/ HTTP/1.1
```

However, it is often easier to navigate based on page/slide number:

```http
GET /api/presentation/<ID>/slide/number/<SLIDE#>/ HTTP/1.1
```

The given image url will provide an IMAGE_TYPE of the slide resized and centered at IMAGE_WIDTH x IMAGE_HEIGHT with a black background.

```http
GET /api/presentation/<ID>/slide/number/<SLIDE#>/image/ HTTP/1.1
```
## Cache
When an slide has been processed by OpenSim an UUID is generated for the texture, this UUID can be stored with the slide to speed up future use. The cache period (`FileCacheTimeout`) is set in the `FlotsamCache.ini`  configuration and needs to be matched by the configuration value for the grid in the CMS.

```http
PUT /api/presentation/<ID>/slide/number/<SLIDE#>/ HTTP/1.1
```

| Parameter         | Type      | Description                                     |
|-------------------|-----------|-------------------------------------------------|
| uuid              | string    | UUID of the slide to be saved                   |
| gridId            | integer   | The ID of the grid, as used in the CMS database |
